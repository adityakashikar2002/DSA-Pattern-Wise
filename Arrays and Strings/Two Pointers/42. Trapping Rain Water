// Brute Force Approach
// Time: O(3n)
// Space: O(2n)
------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------
/**
    sabse brute force tarika hoga ki,
    socho pani trap tabhi hoga jab dono side left aur right me curr height se jyada k heights hongi
    like example [2, 1, 3]
    yaha jab 1 pr honge to pani trap hoga 

    lekin ab sawal hai ki kitna hoga ??

    to isko hum aise dekh skhte hai ki left me sabse max aur right me sabse max 
    in dono ka minimum , minus currHeight iska pani trap hoga

    formula = min(leftMax, rightMax) - arr[i]

    to ab sawal yee hai ki leftMax aur rightMax kaise nikale

    to asan hai ek prefix aur ek suffix max nikalte hai...
*/
class Solution {
    public int trap(int[] height) {
        int n = height.length;

        int trappedWater = 0;

        int[] prefixMax = new int[n];
        int[] suffixMax = new int[n];

        prefixMax[0] = height[0];
        suffixMax[n - 1] = height[n - 1];

        for(int i = 1; i < n; i++)
        {
            int leftMax = Math.max(prefixMax[i - 1], height[i]);
            prefixMax[i] = leftMax;
        }

        for(int i = n - 2; i >=0; i--)
        {
            int rightMax = Math.max(suffixMax[i + 1], height[i]);
            suffixMax[i] = rightMax;
        }

        for(int i = 0; i < n; i++)
        {
            trappedWater += Math.min(prefixMax[i], suffixMax[i]) - height[i];
        }

        return trappedWater;

    }
}
------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------

// Optimal Solution
// Time: O(n)
// Space: O(1)
------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------
/**
    brute force me space bohot lag rahi to hum ise bina space liye solve kr skhte kya
    problem bss itna hai ki kya hum ek pass me hi pata kr skhte kya ki left aur rightMax kya the ?
    rahi baat water trapping ki vo to trap vohi hoga jaha height minimum hogi
    matlab vohi min of leftMax, rightMax vala concept

    to bss hum aate hai two pointers pr...

    aisa socho jab tak left < right hai tab tak pani trap kr skhte

    ab agar height[left] < height[right] se to do cheeze check krni padegi
    1) kya yee naya left , leftMax se bada hai , agar hua to update krna padega nhi to pani overflow hoga
    2) agar leftMax se kam hai to bss trapWater nikalo yee apna uss index tak ka min hai (leftMax)
    left++ karo

    ab agar right < left hai to bhi same cheeze repeat hongi vohi conditions check hongi bss yaha right-- krnge

*/
class Solution {
    public int trap(int[] height) {
        int n = height.length;
        int totalWater = 0;

        int left = 0;
        int right = n - 1;

        int leftMax = height[0];
        int rightMax = height[n - 1];

        while(left < right)
        {
            if(height[left] < height[right])
            {
                if(height[left] > leftMax)
                    leftMax = height[left];
                else
                    totalWater += leftMax - height[left];
                
                left++;
            }
            else
            {
                if(height[right] > rightMax)
                    rightMax = height[right];
                else
                    totalWater += rightMax - height[right];

                right--;
            }
        }
        return totalWater;
    }
}
